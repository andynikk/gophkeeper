## [**Gophkeeper**](https://github.com/andynikk/gophkeeper)

#### **1. Запуск**
##### **1.1 Сервер**  
Запускается с флагами **-a** адрес сервера **-d** строка соединения с базой  
**Пример:** *go run main.go -a localhost:8050 -d postgresql://postgres:postgres@localhost:5432/yapracticum*  
или параметры сеанса: **ADDRESS** и **CRYPTO_KEY**  
##### **1.2 Клиент**
Запускается с флагами **-a** адрес сервера **-c** файл с криптоключем  
**Пример:** *go run main.go -a localhost:8080 -c e:\\Bases\\key\\gophkeeper.xor*  
или параметры сеанса: **ADDRESS** и **DATABASE_URI**  
####  
####  
#### **2. Диаграмма**  
![](https://33333.cdn.cke-cs.com/kSW7V9NHUXugvhoQeFaf/images/12d58ea9f17103acacda7080e3314d30351ccfd98a290de3.jpg)
####  
####  
#### **3. Краткое описание**  
##### 1\. При запуске клиента создается websocket между клиентом и сервером. Одна горутина спамит текущий токен на сервер.  
##### 2\. Если токен валиден, то сервер собирает всю информацию по пользователям и в бесконечном цикле отсылает их, по созданному websocket, на клиент.  
##### 3\. Клиент, второй горутиной, получает всю инфу с сервера и складывает в свое хранилище в памяти. Происходит автоматическое обновление информации по пользователю клиента. Которую можно отобразить или посчитать.  
##### 4\. При вызове API клиент, через хендлеры кладет данные в хранилище на сервере.  
##### 5\. Горутина сервера в бесконечном цикле читает свое хранилище и кладет данные в базу, очищая свое хранилище.  
##### 6\. Файлы с клиента выгружаются на сервер отдельным websocket.  
    6.1. На клиенте создается websocket.  
    6.2. Выбранный файл, режется на части по 512Кб отдельной горутиной. Шифруются, упаковываются в gzip. И каждая часть посылается на сервер с меткой с какого байта начинается часть. Части сразу кладутся в БД, без помещения в хранилище сервера.**  
##### 7\. При загрузке файла на клиент. Отбираются части файла из БД по УИДу. Создается websocket. И по websocket данные передаются на клиент. Где из кусочков собирается файл на диске.  
####  
####  
### **3. Реализованные требования**  
####  
#### **3.1 Обязательные**  
##### **3.1.1. Сервер**  
**|&check;| регистрация, аутентификация и авторизация пользователей;**  
**|&check;| регистрация, аутентификация и авторизация пользователей;**  
**|&check;| хранение приватных данных;**  
**|&check;| синхронизация данных между несколькими авторизованными клиентами одного владельца;**  
**|&check;| передача приватных данных владельцу по запросу.**  
#####  
##### **3.1.2. Клиент**  
**|&check;| аутентификация и авторизация пользователей на удалённом сервере;**  
**|&check;| доступ к приватным данным по запросу.**  
####  
#### **3.2 На усмотрение исполнителя**  
**|&check;| создание, редактирование и удаление данных на стороне сервера или клиента;**  
**|&cross;| формат регистрации нового пользователя;**  
**|&cross;| выбор хранилища;**  
**|&check;| выбор формат хранения данных;**  
**|&check;| обеспечение безопасности передачи и хранения данных;**  
**|&check;| протокол взаимодействия клиента и сервера (websoket);**  
**|&check;| механизмы аутентификации пользователя и авторизации доступа к информации (token jwt).**  
####  
#### **3.3 Дополнительные требования**  
**|&check;| клиент должен распространяться в виде CLI-приложения с возможностью запуска на платформах Windows, Linux и Mac OS;**  
**|&check;| клиент должен давать пользователю возможность получить информацию о версии и дате сборки бинарного файла клиента;**  
####  
#### **3.4 Типы хранимой информации**  
**|&check;| пары логин/пароль;**  
**|&check;| произвольные текстовые данные;**  
**|&check;| произвольные бинарные данные;**  
**|&check;| данные банковских карт;**  
